<div class="admin-card-title">Список авто</div>

<form [formGroup]="sortingForm">
  <mat-form-field appearance="outline">
    <mat-label>Категория</mat-label>
    <mat-select formControlName="category">
      <mat-option *ngFor="let category of categories$ | async" [value]="category.name">
        {{ category.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field appearance="outline" *ngFor="let input of sortInputs">
    <mat-label>{{ input.matLabel }}</mat-label>
    <input type="text" matInput [formControlName]="input.controlName" />
  </mat-form-field>
  <button mat-icon-button (click)="resetData()">
    <mat-icon>refresh</mat-icon>
  </button>
</form>

<div class="mat-elevation-z8">
  <table mat-table [dataSource]="dataSource" matSort>
    <ng-container matColumnDef="category">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Категория</th>
      <td mat-cell *matCellDef="let car">{{ car.categoryId.name }}</td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Модель</th>
      <td mat-cell *matCellDef="let car">{{ car.name }}</td>
    </ng-container>

    <ng-container matColumnDef="number">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Номер</th>
      <td mat-cell *matCellDef="let car">{{ car.number }}</td>
    </ng-container>

    <ng-container matColumnDef="priceMin">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Мин. цена</th>
      <td mat-cell *matCellDef="let car">{{ car.priceMin }}</td>
    </ng-container>

    <ng-container matColumnDef="priceMax">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Макс. цена</th>
      <td mat-cell *matCellDef="let car">{{ car.priceMax }}</td>
    </ng-container>

    <ng-container matColumnDef="tank">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Бенз</th>
      <td mat-cell *matCellDef="let car">{{ car.tank }}</td>
    </ng-container>

    <ng-container matColumnDef="edit">
      <th mat-header-cell *matHeaderCellDef>Изменить</th>
      <td mat-cell *matCellDef="let car" class="icon-column">
        <button mat-icon-button color="accent" (click)="edit(car)">
          <mat-icon>edit</mat-icon>
        </button>
      </td>
    </ng-container>
    <ng-container matColumnDef="log">
      <th mat-header-cell *matHeaderCellDef>Удалить</th>
      <td mat-cell *matCellDef="let car" class="icon-column">
        <button mat-icon-button color="warn" (click)="deleteCar(car)">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[7]" showFirstLastButtons></mat-paginator>
</div>
<app-spinner [show]="showSpinner" color="accent"></app-spinner>
